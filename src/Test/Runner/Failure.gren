module Test.Runner.Failure exposing (Reason(..), InvalidReason(..))

{-| The reason a test failed.

@docs Reason, InvalidReason

-}


{-| The reason a test failed.

Test runners can use this to provide nice output, e.g. by doing diffs on the
two parts of an `Expect.equal` failure.

-}
type Reason
    = Custom
    | Equality { expected : String, actual : String }
    | Comparison { expected : String, actual : String }
      -- Expected, actual, (index of problem, expected element, actual element)
    | ArrayDiff { expected : (Array String), actual : (Array String) }
      {- I don't think we need to show the diff twice with + and - reversed. Just show it after the main vertical bar.
         "Extra" and "missing" are relative to the actual value.
      -}
    | CollectionDiff
        { expected : String
        , actual : String
        , extra : Array String
        , missing : Array String
        }
    | TODO
    | Invalid InvalidReason


{-| The reason a test run was invalid.

Test runners should report these to the user in whatever format is appropriate.

-}
type InvalidReason
    = EmptyArray
    | NonpositiveFuzzCount
    | InvalidFuzzer
    | BadDescription
    | DuplicatedName
    | DistributionInsufficient
    | DistributionBug
